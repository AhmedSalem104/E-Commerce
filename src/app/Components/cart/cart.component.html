@if(data()){
<div class="relative min-h-svh">
    <div class=" container mx-auto p-6">
        <!-- عنوان الصفحة -->
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl font-bold  main-color">Shopping Cart</h1>
            <button [disabled]="clearCart()"  (click)="ClearUserCart()" class="active-link text-white px-6 py-3 rounded mt-4 font-semibold">Clear
                Cart</button>
        </div>
        <!-- قائمة المنتجات -->
        <div class=" bg-gray-300 shadow-md rounded-lg p-4 ">
            <ul>
                @for(p of data().products ;track $index){
                <li
                    class="flex flex-col md:flex-row items-center md:justify-between border-b border-gray-200 py-4 last:border-b-0 ">
                    <!-- صورة المنتج -->
                    <img [src]="p.product.imageCover" alt="Product Image"
                        class="w-24 h-24 object-cover rounded-lg mr-4">

                    <!-- تفاصيل المنتج -->
                    <div class="flex-1 text-center md:text-left mb-4 md:mb-0">
                        <h2 class="text-lg font-semibold ">{{p.product.title?.split(" ")?.splice(0,3)?.join("
                            ")}}
                        </h2>
                        <p class="text-gray-600 font-semibold">{{p?.price}} <span class="pr-2 main-color">EGP</span></p>

                    </div>

                    <!-- أزرار التحكم -->
                    <div class="flex items-center space-x-2">
                        <button (click)="UpdateCartProductQuantity(p.product._id,p.count = p.count-1)"
                            class="active-link text-white px-4 py-2 rounded">-</button>
                        <span class="text-lg w-4 text-center">{{p.count}}</span>
                        <button (click)="UpdateCartProductQuantity(p.product._id,p.count = p.count+1)"
                            class="active-link text-white px-4 py-2 rounded font-semibold">+</button>
                        <button (click)="RemoveSpecificCartItem(p.product._id)" title="Remove From Cart"
                            class="bg-white text-red-500 px-4 py-2 rounded font-semibold"><i
                                class="fa fa-trash"></i></button>
                    </div>
                </li>
                }
            </ul>
        </div>


        <div class="mt-6 bg-gray-200 shadow-md rounded-lg p-4 flex items-center justify-between ">
            <div class="relative">
                <h2 class="text-xl font-bold">Total</h2>
                <p class="text-lg mt-2 text-black font-semibold"> {{data()?.totalCartPrice}} <span
                        class="pr-2 main-color">EGP</span></p>
                <div id="loading-container" [class]="loadingCountClass()">
                    <div class="loadingTotalPrice ">
                        <div class="flex justify-center items-center w-full h-full"> <span
                                class="loaderTotalPrice "></span></div>
                    </div>
                </div>
            </div>
            <div>
                <button [disabled]="cartEmpty()" [routerLink]="['/Orders',data()._id]"
                    class="active-link text-white px-6 py-3 rounded font-bold  "> Confirm Order</button>
            </div>


        </div>

      
    </div>




</div>
}